{"version":3,"file":"services.js","sources":["pages/customer/services.vue","../HX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY3VzdG9tZXIvc2VydmljZXMudnVl"],"sourcesContent":["<template>\r\n  <view class=\"service-list\">\r\n    <view class=\"header\">\r\n      <view class=\"title\">服务列表</view>\r\n    </view>\r\n    \r\n    <!-- 服务列表 -->\r\n    <view class=\"service-items\">\r\n      <block v-if=\"serviceList.length > 0\">\r\n        <view \r\n          class=\"service-item\" \r\n          v-for=\"service in serviceList\" \r\n          :key=\"service.id\"\r\n          @click=\"navigateToDetail(service.id)\"\r\n        >\r\n          <view class=\"service-image\">\r\n            <image :src=\"service.image\" mode=\"aspectFill\"></image>\r\n          </view>\r\n          <view class=\"service-info\">\r\n            <view class=\"service-name\">{{ service.name }}</view>\r\n            <view class=\"service-desc\">{{ service.description }}</view>\r\n            <view class=\"service-meta\">\r\n              <view class=\"merchant-info\">\r\n                <text class=\"merchant-name\">{{ service.merchant.name }}</text>\r\n                <text class=\"merchant-rating\">★ {{ service.merchant.rating }}</text>\r\n              </view>\r\n              <view class=\"service-stats\">\r\n                <text class=\"duration\">{{ service.duration }}分钟</text>\r\n                <text class=\"sales\">销量{{ service.sales }}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"service-price\">¥{{ service.price }}</view>\r\n          </view>\r\n        </view>\r\n      </block>\r\n      <view v-else class=\"empty-tip\">\r\n        <text>暂无服务</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 加载中 -->\r\n    <view v-if=\"loading\" class=\"loading\">\r\n      <text>加载中...</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { serviceService } from '../../utils/mockService.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      serviceList: [],\r\n      loading: true,\r\n      currentPage: 1,\r\n      hasMore: true,\r\n      pageSize: 10\r\n    }\r\n  },\r\n  onLoad() {\r\n    this.fetchServiceList()\r\n  },\r\n  onPullDownRefresh() {\r\n    this.fetchServiceList(1, true)\r\n  },\r\n  onReachBottom() {\r\n    if (this.hasMore && !this.loading) {\r\n      this.fetchServiceList(this.currentPage + 1)\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchServiceList(page = 1, isRefresh = false) {\r\n      if (this.loading || (!isRefresh && !this.hasMore)) {\r\n        return\r\n      }\r\n      \r\n      this.loading = true\r\n      \r\n      try {\r\n        const res = await serviceService.getServiceList(page, this.pageSize)\r\n        \r\n        if (res.success) {\r\n          const data = res.data\r\n          \r\n          if (isRefresh) {\r\n            this.serviceList = data.list\r\n            this.currentPage = 1\r\n            this.hasMore = data.list.length === this.pageSize\r\n          } else {\r\n            this.serviceList = [...this.serviceList, ...data.list]\r\n            this.currentPage = page\r\n            this.hasMore = data.list.length === this.pageSize\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('获取服务列表失败', error)\r\n        uni.showToast({\r\n          title: '获取服务列表失败',\r\n          icon: 'none'\r\n        })\r\n      } finally {\r\n        this.loading = false\r\n        uni.stopPullDownRefresh()\r\n      }\r\n    },\r\n    navigateToDetail(serviceId) {\r\n      uni.navigateTo({\r\n        url: `/pages/customer/service-detail?id=${serviceId}`\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.service-list {\r\n  padding-bottom: 100rpx;\r\n}\r\n\r\n.header {\r\n  padding: 30rpx 0;\r\n  background-color: #fff;\r\n  border-bottom: 1rpx solid #eee;\r\n}\r\n\r\n.title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  text-align: center;\r\n  color: #333;\r\n}\r\n\r\n.service-items {\r\n  padding: 20rpx;\r\n}\r\n\r\n.service-item {\r\n  display: flex;\r\n  background-color: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.service-image {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  margin-right: 24rpx;\r\n  overflow: hidden;\r\n  border-radius: 12rpx;\r\n}\r\n\r\n.service-image image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.service-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n\r\n.service-name {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 12rpx;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.service-desc {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  margin-bottom: 16rpx;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  line-height: 1.4;\r\n}\r\n\r\n.service-meta {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.merchant-info {\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.merchant-name {\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.merchant-rating {\r\n  color: #FF9500;\r\n}\r\n\r\n.service-stats {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.service-price {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #E64340;\r\n}\r\n\r\n.empty-tip {\r\n  padding: 100rpx 0;\r\n  text-align: center;\r\n  color: #999;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.loading {\r\n  padding: 20rpx 0;\r\n  text-align: center;\r\n  color: #999;\r\n  font-size: 28rpx;\r\n}\r\n</style>","import MiniProgramPage from 'F:/demo/pages/customer/services.vue'\nwx.createPage(MiniProgramPage)"],"names":["serviceService","uni"],"mappings":";;;AAkDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,aAAa,CAAE;AAAA,MACf,SAAS;AAAA,MACT,aAAa;AAAA,MACb,SAAS;AAAA,MACT,UAAU;AAAA,IACZ;AAAA,EACD;AAAA,EACD,SAAS;AACP,SAAK,iBAAiB;AAAA,EACvB;AAAA,EACD,oBAAoB;AAClB,SAAK,iBAAiB,GAAG,IAAI;AAAA,EAC9B;AAAA,EACD,gBAAgB;AACd,QAAI,KAAK,WAAW,CAAC,KAAK,SAAS;AACjC,WAAK,iBAAiB,KAAK,cAAc,CAAC;AAAA,IAC5C;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,MAAM,iBAAiB,OAAO,GAAG,YAAY,OAAO;AAClD,UAAI,KAAK,WAAY,CAAC,aAAa,CAAC,KAAK,SAAU;AACjD;AAAA,MACF;AAEA,WAAK,UAAU;AAEf,UAAI;AACF,cAAM,MAAM,MAAMA,kBAAc,eAAC,eAAe,MAAM,KAAK,QAAQ;AAEnE,YAAI,IAAI,SAAS;AACf,gBAAM,OAAO,IAAI;AAEjB,cAAI,WAAW;AACb,iBAAK,cAAc,KAAK;AACxB,iBAAK,cAAc;AACnB,iBAAK,UAAU,KAAK,KAAK,WAAW,KAAK;AAAA,iBACpC;AACL,iBAAK,cAAc,CAAC,GAAG,KAAK,aAAa,GAAG,KAAK,IAAI;AACrD,iBAAK,cAAc;AACnB,iBAAK,UAAU,KAAK,KAAK,WAAW,KAAK;AAAA,UAC3C;AAAA,QACF;AAAA,MACA,SAAO,OAAO;AACdC,sBAAAA,MAAc,MAAA,SAAA,qCAAA,YAAY,KAAK;AAC/BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH,UAAU;AACR,aAAK,UAAU;AACfA,sBAAAA,MAAI,oBAAoB;AAAA,MAC1B;AAAA,IACD;AAAA,IACD,iBAAiB,WAAW;AAC1BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,qCAAqC,SAAS;AAAA,OACpD;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;AC/GA,GAAG,WAAW,eAAe;"}